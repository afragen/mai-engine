!function(d){d(window).on("popstate",function(){location.reload(!0)});var u=d(".mai-continue"),r=d(".mai-skip"),e=function(e){var a,s,t=window.location.search.substring(1).split("&");for(s=0;s<t.length;s++)if((a=t[s].split("="))[0]===e)return void 0===a[1]||decodeURIComponent(a[1])}("step"),a=d(e?".mai-step-"+e:".mai-step-welcome");a.addClass("current-step"),a.fadeIn(),r.click(function(){var e=d(".current-step");e.removeClass("is-error is-success");var a=e.next(".mai-step");e.next().hasClass("mai-step")||(a=d(".mai-step-welcome")),e.removeClass("current-step"),a.addClass("current-step"),e.delay(500).fadeOut(200),a.delay(700).fadeIn(200);var s=a.attr("class").replace("mai-step","").replace("current-step","").replace(" ","").replace("mai-step-","");d(".mai-step-done").hasClass("current-step")&&(u.fadeOut(),r.fadeOut());var t=window.location.protocol+"//"+window.location.host+window.location.pathname+"?page=mai-setup-wizard&step="+s;window.history.pushState({path:t},"",t)}),u.click(function(){d(this).addClass("loading");var s=d(".current-step");s.removeClass("is-error is-success");var t=s.next(".mai-step");s.next().hasClass("mai-step")||(t=d(".mai-step-welcome"));var e=s.attr("class").replace("mai-step","").replace("current-step","").replace(" ","").replace("mai-step-",""),r=t.attr("class").replace("mai-step","").replace("current-step","").replace(" ","").replace("mai-step-",""),i=d(".current-nav"),n=i.next(".mai-nav"),a=d(".mai-email-address").val(),o=d('input[name="mai-step-style"]:checked').val(),p=[],l=[];d('input[name="mai-step-plugins[]"]:checked').each(function(e){p[e]=d(this).val()}),d('input[name="mai-step-content[]"]:checked').each(function(e){l[e]=d(this).val()});var c={action:"mai_setup_wizard",current_step:e,email_address:a,site_style:o,plugins:p,content:l};d.post(ajaxurl,c,function(e){if(e.hasOwnProperty("error"))return u.removeClass("loading"),s.addClass("is-error"),void console.log("Mai Setup Wizard: "+e.error);e.hasOwnProperty("plugin_list")&&d(".mai-step-plugins .mai-step-fields").empty().append(e.plugin_list),s.addClass("is-success"),s.removeClass("current-step"),t.addClass("current-step"),s.delay(1e3).fadeOut(200),t.delay(1400).fadeIn(200),i.removeClass("current-nav"),n.addClass("current-nav");var a=window.location.protocol+"//"+window.location.host+window.location.pathname+"?page=mai-setup-wizard&step="+r;window.history.pushState({path:a},"",a),u.delay(4e3).removeClass("loading")})})}(jQuery);